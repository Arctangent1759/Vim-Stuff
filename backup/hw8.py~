words={'my','ishmael','house','is','full','of','traps','there','a','horse','in','aisle','five'}
def dict(s):
    return s in words

def validateString(s):
    L=[False]*(len(s)+1)
    L[0]=True
    for i in range(1,len(s)+1):
        for j in range(i+1):
            if L[j] and dict(s[j:i]):
                L[i]=True
                break
    return L[len(s)]==True

print validateString("myhouseisfulloftraps")
print validateString("mymymymymymymymymymy")
print validateString("ishmaelisishmael")
print validateString("potato")
print validateString("asdfasdfs")

def reconstructString(s):
    L=[[False,[i]] for i in range(len(s)+1)]
    L[0]=[True,[0]]
    for i in range(1,len(s)+1):
        for j in range(i+1):
            if L[j][0] and dict(s[j:i].lower()):
                L[i][0]=True
                L[i][1]+=L[j][1]
    spacePositions = list(reversed(L[len(s)][1]))
    outputWords=[]
    for i in range(1,len(spacePositions)):
        outputWords.append(s[spacePositions[i-1]:spacePositions[i]])
    return ' '.join(outputWords)+"."

print reconstructString("Myhouseisfulloftraps")
print reconstructString("mymymymymymymymymymy")
print reconstructString("ishmaelisishmael")

