#!/usr/bin/python

## Question Defs
questions=[];
for i in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]:
  questions.append({'type':'association','question':{
	'Decimal Representation':str(i),
	'Binary Representation':('' if len(bin(i)[2:])>=4 else '0')+('' if len(bin(i)[2:])>=3 else '0')+('' if len(bin(i)[2:])>=2 else '0')+bin(i)[2:],
	'Hexidecimal Representation':hex(i)[2:],
	},'hits':0,'misses':0});

## Question Dispacher

import random
hits=0
misses=0
def doQuestion(q):
  global hits, misses
  print
  if q['type']=='association':
	qcat='Hexidecimal Representation'#random.choice(q['question'].keys())
	acat=qcat
	while acat==qcat:
	  acat='Binary Representation'#random.choice(q['question'].keys())
	print "{0}:{1}\n{2}?".format(qcat,q['question'][qcat],acat)
	if raw_input()==q['question'][acat]:
	  print "Correct!"
	  q['hits']+=1
	  hits+=1
	else:
	  print "Incorrect. The answer is {0}".format(q['question'][acat])
	  q['misses']+=1
	  misses+=1
  else:
	print "Unrecognized question type. Please check question defs.";
	return
  print("-------------------------------");


## Interaction Loop
q=None
while True:
  try:
	q=random.choice((questions))
	while q==None or (q['misses']+q['hits']!=0 and q['misses']/(q['misses']+q['hits']) < misses/(misses+hits)):
	  q=random.choice((questions))
	doQuestion(q)
  except KeyboardInterrupt, EOFError:
	print "Goodbye..."
	exit()
